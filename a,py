viajes = []

def reservar_asiento(asientos_disponibles, lista_pasajeros):
    salir = False
    while salir == False:
        print("Asientos disponibles:")
        print(asientos_disponibles)

        elegir_asiento = input("¿Qué asiento desea elegir? ('salir' para terminar): ")

        if elegir_asiento.lower() == "salir":
            salir = True
        else:
            if not elegir_asiento.isdigit():
                print("Ingrese un número válido de asiento.")
                continue

            asiento = int(elegir_asiento)

            if asiento not in asientos_disponibles:
                print("Ese asiento está ocupado o no existe.")
            else:
                nombre = input("Nombre del pasajero: ")
                dni = input("DNI del pasajero: ")

                pasajero = {"nombre": nombre, "dni": dni, "asiento": asiento}
                lista_pasajeros.append(pasajero)

                # marcar asiento como ocupado (reemplazo por la x)
                for i in range(len(asientos_disponibles)):
                    if asientos_disponibles[i] == asiento:
                        asientos_disponibles[i] = "X"

                print("Asiento reservado:", asiento)

def anotarNuevoViaje():
    print("Nuevo viaje? Ingréselo acá: ")
    origen = input("Ingrese el origen: ")
    destino = input("Ingrese el destino: ")
    fecha = input("Ingrese la fecha: ")

    asientos = list(range(1, 101))  # 100 asientos numerados capacidad del avion
    viaje = {"origen": origen, "destino": destino, "fecha": fecha, "asientos": asientos, "pasajeros": []}
    viajes.append(viaje)

    print("Ahora puede reservar asientos para este viaje:")
    reservar_asiento(viaje["asientos"], viaje["pasajeros"])
    print("Su viaje fue creado")
    input("Presione Enter para volver al menú...")

def mostrarPasajeros(viaje):
    if viaje["pasajeros"]:
        print("   Pasajeros:")
        for pasajero in viaje["pasajeros"]:
            print("    -", pasajero["nombre"], "-", pasajero["dni"], "- asiento", pasajero["asiento"])
    else:
        print("   Pasajeros: ninguno")

def mostrarViajeExistente():
    if len(viajes) == 0:
        print("No hay Viajes cargados actualmente")
    else:
        print("Tus viajes son: ")
        for i, viaje in enumerate(viajes):
            print(i + 1, "desde", viaje["origen"], "hasta", viaje["destino"], "fecha", viaje["fecha"])
            mostrarPasajeros(viaje)
            print("Asientos:", viaje["asientos"])
    input("Presione Enter para volver al menú...")

def eliminarViaje():
    if len(viajes) == 0:
        print("No hay viajes cargados actualmente")
    else:
        mostrarViajeExistente()
        numeroAEliminar = int(input("Qué número de viaje desea eliminar?: "))
        if 1 <= numeroAEliminar <= len(viajes):
            eliminar = viajes.pop(numeroAEliminar - 1)
            print("Se eliminó el viaje que iba desde", eliminar["origen"], "hasta", eliminar["destino"], "la fecha", eliminar["fecha"])
        else:
            print("El viaje ingresado no es válido")
    input("Presione Enter para volver al menú...")

def filtrarPorOrigen():
    if len(viajes) == 0:
        print("No hay ningún viaje cargado")
    else:
        origen_buscado = input("Ingrese el origen a buscar: ")
        viajes_filtrados = list(filter(lambda viaje: viaje["origen"] == origen_buscado, viajes))
        if len(viajes_filtrados) == 0:
            print("No hay viajes desde", origen_buscado)
        else:
            print("Viajes encontrados:")
            for viaje in viajes_filtrados:
                print("desde", viaje["origen"], "hasta", viaje["destino"], "fecha", viaje["fecha"])
                mostrarPasajeros(viaje)
                print("Asientos:", viaje["asientos"])
    input("Presione Enter para volver al menú...")

def cargarPasajerosEnViaje():
    if len(viajes) == 0:
        print("No hay viajes cargados actualmente")
    else:
        print("Seleccione el número de viaje para cargar pasajeros:")
        for i, viaje in enumerate(viajes):
            print(i + 1, "desde", viaje["origen"], "hasta", viaje["destino"], "fecha", viaje["fecha"])
        num = int(input("Número de viaje: "))
        if 1 <= num <= len(viajes):
            viaje = viajes[num - 1]
            print("Cargando pasajeros en el viaje desde", viaje["origen"], "hasta", viaje["destino"])
            reservar_asiento(viaje["asientos"], viaje["pasajeros"])
        else:
            print("Número inválido")
    input("Presione Enter para volver al menú...")

def menu():
    opcion = ""
    while opcion != "6":
        print("Bienvenido a nuestro gestor de viajes")
        print("1 Iniciar nuevo viaje")
        print("2 Consultar tus viajes")
        print("3 Eliminar viaje")
        print("4 Filtrar viaje por origen")
        print("5 Salir")
        print("6 Cargar pasajeros en viaje existente")
        opcion = input("Opción: ")

        if opcion == "1":
            anotarNuevoViaje()
        elif opcion == "2":
            mostrarViajeExistente()
        elif opcion == "3":
            eliminarViaje()
        elif opcion == "4":
            filtrarPorOrigen()
        elif opcion == "5":
            cargarPasajerosEnViaje()
        elif opcion == "6":
            print("Salir")
        else:
            print("Error, opción inválida")

menu()

